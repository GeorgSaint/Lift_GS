Object subclass: #LiftManager	instanceVariableNames: 'content listOfMan view ref'	classVariableNames: ''	poolDictionaries: ''	category: 'SLift-Controller'!!LiftManager methodsFor: 'accessing' stamp: 'spectr 4/23/2009 23:06'!content	^ content! !!LiftManager methodsFor: 'accessing' stamp: 'spectr 4/23/2009 23:06'!content: anObject	content := anObject! !!LiftManager methodsFor: 'accessing' stamp: 'spectr 4/26/2009 18:11'!listOfMan	listOfMan isNil ifTrue: [self listOfMan: OrderedCollection new].	^ listOfMan! !!LiftManager methodsFor: 'accessing' stamp: 'spectr 4/26/2009 18:05'!listOfMan: anObject	listOfMan := anObject! !!LiftManager methodsFor: 'accessing' stamp: 'ss 5/27/2009 01:38'!ref	"Answer the value of ref"	^ ref! !!LiftManager methodsFor: 'accessing' stamp: 'ss 5/27/2009 01:38'!ref: anObject	"Set the value of ref"	ref _ anObject! !!LiftManager methodsFor: 'accessing' stamp: 'ss 5/27/2009 00:40'!view	"Answer the value of view"	^ view! !!LiftManager methodsFor: 'accessing' stamp: 'ss 5/27/2009 00:40'!view: anObject	"Set the value of view"	view _ anObject! !!LiftManager methodsFor: 'initialize-release' stamp: 'ss 5/27/2009 11:02'!initialize	| refr |	super initialize.	self content: LiftContent new.	self view: (LiftMachine createWith: self).	refr := LiftRefresher createWith: self content and: self view.	self content ref: refr.	self ref: [refr work] fork.! !!LiftManager methodsFor: 'as yet unclassified' stamp: 'ss 5/27/2009 13:18'!addMan: aCount	| numb |	aCount size < 1		ifTrue:[self notify: 'Not a digit'. ^false].	(aCount at: 1) isDigit		ifTrue:[numb := aCount asNumber.]		ifFalse: [self notify: 'Not a digit'. ^false].	numb > 20		ifTrue:[self notify: 'Too many people to create!!!!!!'. ^false].	numb timesRepeat: [self listOfMan add: ([(LiftMan createWith: self content) live] fork)].	"Transcript clear; show: numb asString."	self view updateAllCount: self listOfMan size.! !!LiftManager methodsFor: 'as yet unclassified' stamp: 'ss 5/26/2009 20:17'!killPeople	self listOfMan isNil 		ifFalse: [self listOfMan do: [:e |			e terminate]].! !!LiftManager methodsFor: 'as yet unclassified' stamp: 'ss 5/27/2009 00:58'!powerChange		self content liftMine powerChange.	^self content liftMine isOn.! !!LiftManager methodsFor: 'as yet unclassified' stamp: 'G.S. 3/29/2012 14:54'!quit	self killPeople.	self content liftMine turnOff.	self content killProc.	self ref terminate.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!LiftManager class	instanceVariableNames: ''!Object subclass: #LiftRefresher	instanceVariableNames: 'content view'	classVariableNames: ''	poolDictionaries: ''	category: 'SLift-Controller'!!LiftRefresher methodsFor: 'accessing' stamp: 'ss 5/27/2009 01:35'!content	"Answer the value of content"	^ content! !!LiftRefresher methodsFor: 'accessing' stamp: 'ss 5/27/2009 01:35'!content: anObject	"Set the value of content"	content _ anObject! !!LiftRefresher methodsFor: 'accessing' stamp: 'ss 5/27/2009 01:35'!view	"Answer the value of view"	^ view! !!LiftRefresher methodsFor: 'accessing' stamp: 'ss 5/27/2009 01:35'!view: anObject	"Set the value of view"	view _ anObject! !!LiftRefresher methodsFor: 'as yet unclassified' stamp: 'ss 5/27/2009 02:22'!update	| lift uow |	lift := self content lift.	uow := self content unitOfWork.	self view updateFloor: lift currFloor.	self view updateLift: lift manCount.	self view update1Floor: 0 and: (uow requests countWanted at: 1).	self view update2Floor: 0 and: (uow requests countWanted at: 2).	self view update3Floor: 0 and: (uow requests countWanted at: 3).	self view update4Floor: 0 and: (uow requests countWanted at: 4).	self view update5Floor: 0 and: (uow requests countWanted at: 5).	self view update6Floor: 0 and: (uow requests countWanted at: 6).! !!LiftRefresher methodsFor: 'as yet unclassified' stamp: 'ss 5/27/2009 02:04'!work	[true] whileTrue: [		self content liftSem refresh wait.		self update].! !!LiftRefresher methodsFor: 'initialize-release' stamp: 'ss 5/27/2009 01:37'!initialize	super initialize.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!LiftRefresher class	instanceVariableNames: ''!!LiftRefresher class methodsFor: 'as yet unclassified' stamp: 'ss 5/27/2009 01:34'!createWith: aContent and: aView	^self new content: aContent; view: aView.! !